{% extends "templates/_base.html" %}
{% macro user_info(user, counter, is_client=False) %}
    <tr>
        <td class="counter">{{ counter }}</td>
        <td class="email"><img src="{{user.avatar_url}}" alt="{{user.name}} [{{user.email}}]" /></td>
        <td class="name">
            {% if not request.has_perm('admin') %}
                {{ user.name }}
            {% else %}
                <a href="{{ request.url_for('/user/view', user_id=user.id) }}">{{ user.name }}</a>
            {% endif %}
                ({{ location(user) }})
        </td>
        <td class="contact-info">
            <a href="mailto:{{ user.email }}">{{ user.email }}</a><br/><br/>
            {% if user.phone %}<label>{% trans %}Cellphone{% endtrans %}:</label><span>{{ user.phone }}</span><br/>{% endif %}
            {% if user.phone_on_desk %}<label>{% trans %}Deskphone{% endtrans %}:</label>{{ user.phone_on_desk }}<br/>{% endif %}
            {% if user.skype %}<label>Skype:</label>{{ user.skype }}<br/>{% endif %}
            {% if user.irc %}<label>IRC:</label>{{ user.irc }}<br/>{% endif %}
        </td>
        <td>
            {% if user.freelancer %}{% trans %}Freelancer{% endtrans %}<br/>{% endif %}
            {% if user.is_programmer %}{% trans %}Programer{% endtrans %}<br/>{% endif %}
            {% if user.is_frontend_developer %}{% trans %}Frontend developer{% endtrans %}<br/>{% endif %}
            {% if user.is_graphic_designer %}{% trans %}Graphic designer{% endtrans %}<br/>{% endif %}
            {% if user.levels %}{{ user.levels_html }}{% endif %}
        </td>
        <td>
            {% if user.availability_link %}<a href="{{ user.availability_link }}">{% trans %}Avability{% endtrans %}</a>{% endif %}<br/>
            {% if user.tasks_link %}<a href="{{ user.tasks_link }}">{% trans %}Tasks{% endtrans %}</a>{% endif %}
        </td>
        <td>
            {% if user.start_work %}{{ user.start_work.strftime('%d/%m/%Y') or ''}}{% else %}{% endif %}
        </td>
    </tr>
{% endmacro %}

{% block content %}
     {% if not is_get %}
    <ng-include src="'users.html'"></ng-include>
     {% else %}
     <table class="table table-bordered table-hover user-list width_auto">
        <thead>
            <th class="lp">&nbsp;</th>
            <th class="avatar">&nbsp;</th>
            <th class="name">
                {% trans %}Employee's name{% endtrans %}
            </th>
            <th class="contact">{% trans %}Contact{% endtrans %}</th>
            <th class="role">{% trans %}Role{% endtrans %}</th>
            <th class="calendars">{% trans %}Calendars{% endtrans %}</th>
            <th>{% trans %}Start work{% endtrans %}</th>
        </thead>
        <tbody>
            {% for user in users %}
                {{ user_info(user, loop.index) }}
            {% endfor %}
        </tbody>
    </table>
     {% endif %}
{% endblock %}